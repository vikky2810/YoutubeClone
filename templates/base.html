<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="{% block description %}A privacy-focused, lightweight YouTube frontend. Search and watch videos without tracking.{% endblock %}">
    <title>{% block title %}ViewTube - Privacy-Focused YouTube Frontend{% endblock %}</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Roboto+Condensed:wght@700&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    {% block extra_head %}{% endblock %}
</head>

<body class="{% block body_class %}{% endblock %}">

    <!-- Top Header -->
    <header class="yt-header" id="yt-header">
        <div class="yt-header-left">
            <button class="yt-icon-btn hamburger-btn" id="sidebar-toggle" aria-label="Menu">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z" />
                </svg>
            </button>
            <a href="/" class="yt-logo" aria-label="ViewTube Home">
                <svg viewBox="0 0 26 20" width="26" height="20" aria-hidden="true">
                    <g fill="none">
                        <rect width="26" height="20" rx="5" fill="#FF0000" />
                        <polygon points="10,5 21,10 10,15" fill="white" />
                    </g>
                </svg>
                <span class="yt-logo-text">ViewTube</span>
            </a>
        </div>

        <div class="yt-header-center">
            {% block header_search %}
            <form action="/search" method="get" class="yt-search-form" id="yt-search-form" role="search">
                <div class="yt-search-wrapper">
                    <div class="yt-search-box">
                        <input type="text" name="q" class="yt-search-input" id="main-search-input" placeholder="Search"
                            autocomplete="off" aria-label="Search">
                        <button type="submit" class="yt-search-btn" aria-label="Search">
                            <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                                <path
                                    d="M20.87 20.17l-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" />
                            </svg>
                        </button>
                    </div>
                    <button type="button" class="yt-mic-btn" aria-label="Search with voice">
                        <svg viewBox="0 0 24 24" width="22" height="22" fill="currentColor">
                            <path
                                d="M12 14c1.66 0 2.99-1.34 2.99-3L15 5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3zm5.3-3c0 3-2.54 5.1-5.3 5.1S6.7 14 6.7 11H5c0 3.41 2.72 6.23 6 6.72V21h2v-3.28c3.28-.48 6-3.3 6-6.72h-1.7z" />
                        </svg>
                    </button>
                </div>
            </form>
            {% endblock %}
        </div>

        <div class="yt-header-right">
            <!-- Mobile search toggle (hidden on desktop) -->
            <button class="yt-icon-btn mobile-search-toggle" id="mobile-search-toggle" aria-label="Search"
                aria-expanded="false">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M20.87 20.17l-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" />
                </svg>
            </button>
            <button class="yt-icon-btn" aria-label="Upload video">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M17 10.5V7c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v10c0 .55.45 1 1 1h12c.55 0 1-.45 1-1v-3.5l4 4v-11l-4 4z" />
                </svg>
            </button>
            <button class="yt-icon-btn" aria-label="Notifications">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M12 22c1.1 0 2-.9 2-2h-4c0 1.1.9 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z" />
                </svg>
            </button>
            <button class="yt-avatar-btn" aria-label="Sign in">
                <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                    <path
                        d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z" />
                </svg>
                <span>Sign in</span>
            </button>
        </div>
    </header>

    <!-- Mobile search overlay (visible only on mobile when toggled) -->
    <div class="mobile-search-bar" id="mobile-search-bar" aria-hidden="true">
        <form action="/search" method="get" class="mobile-search-form" role="search">
            <input type="text" name="q" id="mobile-search-input" class="mobile-search-input"
                placeholder="Search ViewTube…" autocomplete="off" aria-label="Search">
            <button type="submit" class="mobile-search-submit" aria-label="Search">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path
                        d="M20.87 20.17l-5.59-5.59C16.35 13.35 17 11.75 17 10c0-3.87-3.13-7-7-7s-7 3.13-7 7 3.13 7 7 7c1.75 0 3.35-.65 4.58-1.71l5.59 5.59.7-.71zM10 16c-3.31 0-6-2.69-6-6s2.69-6 6-6 6 2.69 6 6-2.69 6-6 6z" />
                </svg>
            </button>
            <button type="button" class="mobile-search-close" id="mobile-search-close" aria-label="Close search">
                <svg viewBox="0 0 24 24" width="20" height="20" fill="currentColor">
                    <path
                        d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                </svg>
            </button>
        </form>
    </div>

    <!-- Page Wrapper -->
    <div class="yt-page-wrapper">
        <!-- Sidebar -->
        <nav class="yt-sidebar" id="yt-sidebar" aria-label="Main Navigation">
            <div class="yt-sidebar-inner">
                <!-- Main Nav -->
                <div class="yt-sidebar-section">
                    <a href="/" class="yt-sidebar-item {% if request.path == '/' %}active{% endif %}" id="nav-home">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z" />
                        </svg>
                        <span>Home</span>
                    </a>
                    <a href="/#shorts" class="yt-sidebar-item" id="nav-shorts">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M17.77 10.32l-1.2-.5L18 9.06c1.84-.96 2.53-3.23 1.56-5.06s-3.24-2.53-5.07-1.56L6 6.94c-1.29.68-2.07 2.04-2 3.49.07 1.42.93 2.67 2.22 3.25l1.2.5L6 14.94c-1.84.96-2.53 3.23-1.56 5.06.97 1.83 3.24 2.53 5.07 1.56l8.5-4.5c1.29-.68 2.07-2.04 2-3.49-.07-1.42-.93-2.67-2.24-3.25zM10 14.45v-5l5 2.5-5 2.5z" />
                        </svg>
                        <span>Shorts</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-subscriptions">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M10 18h4v-2h-4v2zM3 6v2h18V6H3zm3 7h12v-2H6v2z" />
                        </svg>
                        <span>Subscriptions</span>
                    </a>
                </div>

                <div class="yt-sidebar-divider"></div>

                <!-- You Section -->
                <div class="yt-sidebar-section">
                    <div class="yt-sidebar-section-title">You</div>
                    <a href="#" class="yt-sidebar-item" id="nav-history">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M13 3c-4.97 0-9 4.03-9 9H1l3.89 3.89.07.14L9 12H6c0-3.87 3.13-7 7-7s7 3.13 7 7-3.13 7-7 7c-1.93 0-3.68-.79-4.94-2.06l-1.42 1.42C8.27 19.99 10.51 21 13 21c4.97 0 9-4.03 9-9s-4.03-9-9-9zm-1 5v5l4.28 2.54.72-1.21-3.5-2.08V8H12z" />
                        </svg>
                        <span>History</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-liked">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M1 21h4V9H1v12zm22-11c0-1.1-.9-2-2-2h-6.31l.95-4.57.03-.32c0-.41-.17-.79-.44-1.06L14.17 1 7.59 7.59C7.22 7.95 7 8.45 7 9v10c0 1.1.9 2 2 2h9c.83 0 1.54-.5 1.84-1.22l3.02-7.05c.09-.23.14-.47.14-.73v-1.91l-.01-.01L23 10z" />
                        </svg>
                        <span>Liked videos</span>
                    </a>
                </div>

                <div class="yt-sidebar-divider"></div>

                <!-- Explore Section -->
                <div class="yt-sidebar-section">
                    <div class="yt-sidebar-section-title">Explore</div>
                    <a href="#" class="yt-sidebar-item" id="nav-trending">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path d="M16 6l2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z" />
                        </svg>
                        <span>Trending</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-music">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M12 3v10.55c-.59-.34-1.27-.55-2-.55-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4V7h4V3h-6z" />
                        </svg>
                        <span>Music</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-movies">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M18 4l2 4h-3l-2-4h-2l2 4h-3l-2-4H8l2 4H7L5 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V4h-4z" />
                        </svg>
                        <span>Movies & TV</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-gaming">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M15 7.5V2H9v5.5l3 3 3-3zM7.5 9H2v6h5.5l3-3-3-3zM9 16.5V22h6v-5.5l-3-3-3 3zM16.5 9l-3 3 3 3H22V9h-5.5z" />
                        </svg>
                        <span>Gaming</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-news">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 14H4V6h16v12zM6 10h2v2H6zm0 4h8v2H6zm10 0h2v2h-2zm-6-4h8v2h-8z" />
                        </svg>
                        <span>News</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-sports">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-1 14H9V8h2v8zm4 0h-2V8h2v8z" />
                        </svg>
                        <span>Sports</span>
                    </a>
                </div>

                <div class="yt-sidebar-divider"></div>

                <!-- More from YouTube -->
                <div class="yt-sidebar-section">
                    <div class="yt-sidebar-section-title">More from YouTube</div>
                    <a href="#" class="yt-sidebar-item" id="nav-premium">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm-9 10.5v-7l6 3.5-6 3.5z" />
                        </svg>
                        <span>YouTube Premium</span>
                    </a>
                    <a href="#" class="yt-sidebar-item" id="nav-studio">
                        <svg viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
                            <path
                                d="M15.5 12c0 1.93-1.57 3.5-3.5 3.5S8.5 13.93 8.5 12s1.57-3.5 3.5-3.5 3.5 1.57 3.5 3.5zm4-9h-2.5L16 2h-8l-1 1H4.5C3.67 3 3 3.67 3 4.5v15C3 20.33 3.67 21 4.5 21h15c.83 0 1.5-.67 1.5-1.5v-15c0-.83-.67-1.5-1.5-1.5zm-7.5 14c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5z" />
                        </svg>
                        <span>YouTube Studio</span>
                    </a>
                </div>

                <div class="yt-sidebar-divider"></div>

                <div class="yt-sidebar-footer">
                    <p>© 2025 ViewTube</p>
                    <p>Privacy-focused YouTube frontend</p>
                </div>
            </div>
        </nav>

        <!-- Sidebar Overlay (Mobile) -->
        <div class="yt-sidebar-overlay" id="sidebar-overlay"></div>

        <!-- Main Content Area -->
        <main class="yt-main-content" id="yt-main-content">
            <!-- Flash Messages -->
            <div id="flash-messages" class="flash-messages-container">
                {% with messages = get_flashed_messages(with_categories=true) %}
                {% if messages %}
                {% for category, message in messages %}
                <div class="yt-alert yt-alert-{{ category }}">
                    <div class="yt-alert-content">
                        {% if category == 'error' %}
                        <span class="yt-alert-icon">⚠️</span>
                        {% else %}
                        <span class="yt-alert-icon">ℹ️</span>
                        {% endif %}
                        <span>{{ message }}</span>
                    </div>
                    <button class="yt-alert-close" onclick="this.parentElement.remove()"
                        aria-label="Close">&times;</button>
                </div>
                {% endfor %}
                {% endif %}
                {% endwith %}
            </div>

            {% block content %}
            <div class="yt-page-container {% block container_class %}{% endblock %}">
                {% block main_content %}{% endblock %}
            </div>
            {% endblock %}
        </main>
    </div>

    <!-- Scripts -->
    <script src="{{ url_for('static', filename='autocomplete.js') }}"></script>
    <script>
        // Sidebar toggle
        const sidebarToggle = document.getElementById('sidebar-toggle');
        const sidebar = document.getElementById('yt-sidebar');
        const overlay = document.getElementById('sidebar-overlay');
        const mainContent = document.getElementById('yt-main-content');

        function toggleSidebar() {
            sidebar.classList.toggle('collapsed');
            mainContent.classList.toggle('sidebar-collapsed');
            document.body.classList.toggle('sidebar-open');
        }

        if (sidebarToggle) {
            sidebarToggle.addEventListener('click', toggleSidebar);
        }
        if (overlay) {
            overlay.addEventListener('click', () => {
                sidebar.classList.remove('collapsed');
                document.body.classList.remove('sidebar-open');
            });
        }

        // Global error handling helper
        window.showError = function (message) {
            const container = document.getElementById('flash-messages');
            if (!container) return;
            const alert = document.createElement('div');
            alert.className = 'yt-alert yt-alert-error fade-in';
            alert.innerHTML = `
                <div class="yt-alert-content">
                    <span class="yt-alert-icon">⚠️</span>
                    <span>${message}</span>
                </div>
                <button class="yt-alert-close" onclick="this.parentElement.remove()">&times;</button>
            `;
            container.appendChild(alert);
            setTimeout(() => {
                alert.style.opacity = '0';
                setTimeout(() => alert.remove(), 300);
            }, 5000);
        };
    </script>
    {% block scripts %}{% endblock %}
</body>

</html>